{"ast":null,"code":"/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar dateTick0 = require('../../lib').dateTick0;\n\nvar numConstants = require('../../constants/numerical');\n\nvar ONEWEEK = numConstants.ONEWEEK;\n\nfunction getPeriod0Dflt(period, calendar) {\n  if (period % ONEWEEK === 0) {\n    return dateTick0(calendar, 1); // Sunday\n  }\n\n  return dateTick0(calendar, 0);\n}\n\nmodule.exports = function handlePeriodDefaults(traceIn, traceOut, layout, coerce, opts) {\n  if (!opts) {\n    opts = {\n      x: true,\n      y: true\n    };\n  }\n\n  if (opts.x) {\n    var xperiod = coerce('xperiod');\n\n    if (xperiod) {\n      coerce('xperiod0', getPeriod0Dflt(xperiod, traceOut.xcalendar));\n      coerce('xperiodalignment');\n    }\n  }\n\n  if (opts.y) {\n    var yperiod = coerce('yperiod');\n\n    if (yperiod) {\n      coerce('yperiod0', getPeriod0Dflt(yperiod, traceOut.ycalendar));\n      coerce('yperiodalignment');\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"script"}